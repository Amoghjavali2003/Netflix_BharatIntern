<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/391827d54c.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="shortcut icon" href="./Assets/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="index2.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <title>Netflix Series, TV Shows, Animes & Movies</title>
</head>
<body>
    <div class="user-info-popup" id="userInfoPopup">
        <p id="usernameDisplay">Welcome<span id="username"></span></p>
        <a href="membership.html" class="subscribe-btn">Subscribe Now</a>
        <a href="/logout" class="logout-btn">Logout</a>
    </div>

    <button class="user-info-btn" onclick="toggleUserInfoPopup()">
        <i class="fas fa-user"></i>
    </button>

    <div class="page-content">
        <!-- Series Section -->
        <section class="section-content container">
            <h2>Popular Series</h2>
            <div class="position-relative">
                <button class="scroll-button left-button" id="scrollLeftSeries">
                    <i class="fas fa-chevron-left"></i>
                </button>

                <div class="scrollable-container" id="seriesContainer">
                    <div class="item" onclick="playVideo(1, './Assets/s1Prime.mp4', 'Series 1 Description')">
                        <img src="./Assets/S1.png" alt="Series 1">
                        <p>Prime</p>
                    </div>
                    <div class="item" onclick="playVideo(7, './Assets/s2AppTv+.mp4', 'Series 2 Description')">
                        <img src="./Assets/S2.png" alt="Series 2">
                        <p>AppTV+</p>
                    </div>
                    <div class="item" onclick="playVideo(8, './Assets/s3Rebel.mp4', 'Series 3 Description')">
                        <img src="./Assets/S3.png" alt="Series 3">
                        <p>Rebel</p>
                    </div>
                    <div class="item" onclick="playVideo(20, './Assets/s4SHome.mp4', 'Series 4 Description')">
                        <img src="./Assets/S4.png" alt="Series 4">
                        <p>S Home</p>
                    </div>
                    <div class="item" onclick="playVideo(21, './Assets/s5Sector36.mp4', 'Series 5 Description')">
                        <img src="./Assets/S5.png" alt="Series 5">
                        <p>Sector 36</p>
                    </div>
                    <div class="item" onclick="playVideo(22, './Assets/s6HBO.mp4', 'Series 6 Description')">
                        <img src="./Assets/S6.png" alt="Series 6">
                        <p>HBO</p>
                    </div>
                    <div class="item" onclick="playVideo(23, './Assets/s7House.mp4', 'Series 7 Description')">
                        <img src="./Assets/S7.png" alt="Series 7">
                        <p>House</p>
                    </div>
                    <div class="item" onclick="playVideo(24, './Assets/s8moneyHiest.mp4', 'Series 8 Description')">
                        <img src="./Assets/S8.png" alt="Series 8">
                        <p>Money Hiest</p>
                    </div>
                </div>

                <button class="scroll-button right-button" id="scrollRightSeries">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </section>

        <!-- Section: TV Shows -->
<section class="section-content container">
    <h2>Top TV Shows</h2>
    <div class="scrollable-container" id="tvShowsContainer">
        <div class="item" onclick="playVideo(2,'./Assets/tv1BigBoss.mp4', 'TV Show 1 Description')">
            <img src="./Assets/TV1.png" alt="TV Show 1">
            <p>Bigg Boss</p>
        </div>
        <div class="item" onclick="playVideo(9,'./Assets/tv2Orginal.mp4', 'TV Show 2 Description')">
            <img src="./Assets/TV2.png" alt="TV Show 2">
            <p>Original</p>
        </div>
        <div class="item" onclick="playVideo(10,'./Assets/tv3OneTrain.mp4', 'TV Show 3 Description')">
            <img src="./Assets/TV3.png" alt="TV Show 3">
            <p>One Train</p>
        </div>
        <div class="item" onclick="playVideo(18,'./Assets/tv4Kp.mp4', 'TV Show 2 Description')">
            <img src="./Assets/TV4.png" alt="TV Show 2">
            <p>Kapil Sharma Show</p>
        </div>
        <div class="item" onclick="playVideo(19,'./Assets/tv5TaazaKhabar.mp4', 'TV Show 2 Description')">
            <img src="./Assets/TV5.png" alt="TV Show 2">
            <p>Taaza Khabar</p>
        </div>
    </div>
</section>

<!-- Section: Animes -->
<section class="section-content container">
    <h2>Popular Animes</h2>
    <div class="scrollable-container" id="animesContainer">
        <div class="item" onclick="playVideo(3,'./Assets/A1KungFuPanda3.mp4', 'Anime 1 Description')">
            <img src="./Assets/A1.png" alt="Anime 1">
            <p>Kung Fu Panda 3</p>
        </div>
        <div class="item" onclick="playVideo(11,'./Assets/A2Zootopia.mp4', 'Anime 2 Description')">
            <img src="./Assets/A2.png" alt="Anime 2">
            <p>Zootopia</p>
        </div>
        <div class="item" onclick="playVideo(12,'./Assets/A3OnePiece.mp4', 'Anime 3 Description')">
            <img src="./Assets/A3.png" alt="Anime 3">
            <p>One Piece</p>
        </div>
        <div class="item" onclick="playVideo(15,'./Assets/A4Shichan.mp4', 'Anime 3 Description')">
            <img src="./Assets/A4.png" alt="Anime 3">
            <p>Shinchan</p>
        </div>
        <div class="item" onclick="playVideo(17,'./Assets/A5Anime.mp4', 'Anime 3 Description')">
            <img src="./Assets/A5.png" alt="Anime 3">
            <p>Anime</p>
        </div>
    </div>
</section>

        <!-- Movies Section -->
        <section class="section-content container">
            <h2>Top Movies</h2>
            <div class="position-relative">
                <button class="scroll-button left-button" id="scrollLeftMovies">
                    <i class="fas fa-chevron-left"></i>
                </button>

                <div class="scrollable-container" id="moviesContainer">
                    <div class="item" onclick="playVideo(4, './Assets/M1Max.mp4', 'Movie 1 Description')">
                        <img src="./Assets/M1.png" alt="Movie 1">
                        <p>Max</p>
                    </div>
                    <div class="item" onclick="playVideo(5, './Assets/M2Toxic.mp4', 'Movie 2 Description')">
                        <img src="./Assets/M2.png" alt="Movie 2">
                        <p>Toxic</p>
                    </div>
                    <div class="item" onclick="playVideo(6,'./Assets/M3Kalki.mp4', 'Movie 3 Description')">
                        <img src="./Assets/M3.png" alt="Movie 3">
                        <p>Kalki</p>
                    </div>
                    <div class="item" onclick="playVideo(13,'./Assets/M4Endgame.mp4', 'Movie 4 Description')">
                        <img src="./Assets/M4.png" alt="Movie 4">
                        <p>Endgame</p>
                    </div>
                    <div class="item" onclick="playVideo(14,'./Assets/M5SwampThing.mp4', 'Movie 4 Description')">
                        <img src="./Assets/M5.png" alt="Movie 4">
                        <p>Swamp Thing</p>
                    </div>
                    <div class="item" onclick="playVideo(16,'./Assets/M6Deadpool.mp4', 'Movie 4 Description')">
                        <img src="./Assets/M6.png" alt="Movie 4">
                        <p>Deadpool</p>
                    </div>
                    <div class="item" onclick="playVideo(25,'./Assets/M7Kantara.mp4', 'Movie 4 Description')">
                        <img src="./Assets/M7.png" alt="Movie 4">
                        <p>Kantara</p>
                    </div>
                    <div class="item" onclick="playVideo(26,'./Assets/M8War.mp4', 'Movie 4 Description')">
                        <img src="./Assets/M8.png" alt="Movie 4">
                        <p>War</p>
                    </div>
                    <div class="item" onclick="playVideo(27,'./Assets/M9Pushpa2.mp4', 'Movie 4 Description')">
                        <img src="./Assets/M9.png" alt="Movie 4">
                        <p>Pushpa 2</p>
                    </div>
                    <div class="item" onclick="playVideo(28,'./Assets/M10Kaatera.mp4', 'Movie 4 Description')">
                        <img src="./Assets/M10.png" alt="Movie 4">
                        <p>Kaatera</p>
                    </div>
                </div>

                <button class="scroll-button right-button" id="scrollRightMovies">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </section>
    </div>
    <center>
        <h2><b>Join today, no reason to wait.</b></h2>
        <p>Stream on your phone, tablet, laptop, TV and more.</p>
        <a href="membership.html" class="subscribe-btn2">Subscribe Now</a>
    </center>

    <!-- Pop-down Video Display -->
    <div class="video-display" id="videoDisplay">
        <video controls>
            <source id="videoSource" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div class="description-area">
            <div class="description" id="videoDescription"></div>
            <a href="membership.html" class="membership-btn">Subcribe to Watch</a>
        </div>
        <button class="close-btn" onclick="closeVideo()">×</button>
    </div>

    <script>
        // Scrolling functionality for Series
        document.getElementById('scrollLeftSeries').onclick = function () {
            document.getElementById('seriesContainer').scrollBy({
                left: -200,
                behavior: 'smooth'
            });
        };

        document.getElementById('scrollRightSeries').onclick = function () {
            document.getElementById('seriesContainer').scrollBy({
                left: 200,
                behavior: 'smooth'
            });
        };

        document.getElementById('scrollLeftMovies').onclick = function () {
        document.getElementById('moviesContainer').scrollBy({
            left: -200,
            behavior: 'smooth'
        });
    };

    document.getElementById('scrollRightMovies').onclick = function () {
        document.getElementById('moviesContainer').scrollBy({
            left: 200,
            behavior: 'smooth'
        });
    };

        function toggleUserInfoPopup() {
            const popup = document.getElementById('userInfoPopup');
            popup.classList.toggle('show');
        }

    // Fetch and display the username
    document.addEventListener('DOMContentLoaded', () => {
    fetch('/get-username')
        .then(response => response.json())
        .then(data => {
            const usernameElement = document.getElementById('username');
            if (data.username) {
                usernameElement.textContent = `, ${data.username}`;
            } else {
                usernameElement.textContent = ', Guest';
            }
        })
        .catch(error => console.error('Error fetching username:', error));
});


        // Play video and update view count
        function playVideo(videoId, src, description) {
            const videoDisplay = document.getElementById('videoDisplay');
            const videoElement = videoDisplay.querySelector('video');
            const descriptionElement = document.getElementById('videoDescription');
            const sourceElement = document.getElementById('videoSource');
            const pageContent = document.querySelector('.page-content');

            sourceElement.src = src;
            videoElement.load();
            descriptionElement.textContent = description;

            videoDisplay.classList.add('show');
            pageContent.classList.add('blur-background');

            videoElement.oncanplay = () => {
                videoElement.play();
            };

            // Update views count by sending request to the server
            fetch(`/update-views/${videoId}`, {
                method: 'POST'
            })
            .then(response => response.json())
            .then(data => {
                console.log('Views updated:', data);
            })
            .catch(error => {
                console.error('Error updating views:', error);
            });
        }

        function closeVideo() {
            const videoDisplay = document.getElementById('videoDisplay');
            const videoElement = videoDisplay.querySelector('video');
            const pageContent = document.querySelector('.page-content');
            
            videoElement.pause();
            videoElement.currentTime = 0;
            videoDisplay.classList.remove('show');
            const sourceElement = document.getElementById('videoSource');
            sourceElement.src = '';
            videoElement.load();
            pageContent.classList.remove('blur-background');
        }
    </script>
</body>
</html>
